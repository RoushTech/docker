services:
  magento-php84-healthchecks:
    build:
      dockerfile: Magento.Dockerfile
      target: magento-84-node-base
    configs:
      - source: php_info
        target: /app/pub/index.php
    ports:
      - "4084:80"
  magento-php81-healthchecks:
    build:
      dockerfile: Magento.Dockerfile
      target: magento-81-node-base
    configs:
      - source: php_info
        target: /app/pub/index.php
    ports:
      - "4081:80"
  php84-node-healthchecks:
    build:
      context: .
      dockerfile: PHP.Dockerfile
      target: php-84-node-base
    configs:
      - source: php_info
        target: /app/public/index.php
    ports:
      - "3184:80"
  php81-node-healthchecks:
    build:
      context: .
      dockerfile: PHP.Dockerfile
      target: php-81-node-base
    configs:
      - source: php_info
        target: /app/public/index.php
    ports:
      - "3181:80"
  php84-healthchecks:
    build:
      context: .
      dockerfile: PHP.Dockerfile
      target: php-84-base
    configs:
      - source: php_info
        target: /app/public/index.php
    ports:
      - "3084:80"
  php81-healthchecks:
    build:
      context: .
      dockerfile: PHP.Dockerfile
      target: php-81-base
    configs:
      - source: php_info
        target: /app/public/index.php
    ports:
      - "3081:80"
  php74-healthchecks:
    build:
      context: .
      dockerfile: PHP.Dockerfile
      target: php-74-base
    configs:
      - source: php_info
        target: /app/public/index.php
    ports:
      - "3074:80"

configs:
  php_info:
    content: |
      <?php
      phpinfo();
